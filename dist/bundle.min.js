!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Convo=e()}}((function(){return function e(t,i,n){function s(r,a){if(!i[r]){if(!t[r]){var u="function"==typeof require&&require;if(!a&&u)return u(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[r]={exports:{}};t[r][0].call(d.exports,(function(e){return s(t[r][1][e]||e)}),d,d.exports,e,t,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(e,t,i){t.exports=function(e,t){return t=t||{},new Promise((function(i,n){var s=new XMLHttpRequest,o=[],r=[],a={},u=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:u,headers:{keys:function(){return o},entries:function(){return r},get:function(e){return a[e.toLowerCase()]},has:function(e){return e.toLowerCase()in a}}}};for(var c in s.open(t.method||"get",e,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,i){o.push(t=t.toLowerCase()),r.push([t,i]),a[t]=a[t]?a[t]+","+i:i})),i(u())},s.onerror=n,s.withCredentials="include"==t.credentials,t.headers)s.setRequestHeader(c,t.headers[c]);s.send(t.body||null)}))}},{}],2:[function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(i,"__esModule",{value:!0});const s=e("./utils");i.default=class{constructor(e,t){return this.validate=(e,t)=>n(this,void 0,void 0,(function*(){return yield(0,s.fetcher)("POST",`${this.base}/validateAuth?apikey=${this.apikey}`,{signerAddress:e,token:t})})),this.authenticate=(e,t,i,o,r)=>n(this,void 0,void 0,(function*(){if("ethereum"===o)return yield(0,s.fetcher)("POST",`${this.base}/auth?apikey=${this.apikey}`,{signerAddress:e,signature:t,timestamp:i,chain:o});if("near"===o)return yield(0,s.fetcher)("POST",`${this.base}/auth?apikey=${this.apikey}`,{signerAddress:e,signature:t,accountId:r,timestamp:i,chain:o});{const e="Invalid Chain Name";return console.error(e),{error:e}}})),this.apikey=e,this.base=t,this}getSignatureData(e,t){return`I allow this site to access my data on The Convo Space using the account ${e}. Timestamp:${t}`}}},{"./utils":8}],3:[function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(i,"__esModule",{value:!0});const s=e("./utils");i.default=class{constructor(e){return this.base="https://theconvo.space/api",this.logConfig=()=>n(this,void 0,void 0,(function*(){const e=yield this.ping();return{base:this.base,apikey:this.apikey,version:"0.1.9",pingResult:e}})),this.ping=()=>n(this,void 0,void 0,(function*(){return yield(0,s.fetcher)("GET",`${this.base}/ping`,{})})),this.apikey=e,this}getApiKey(){return this.apikey}}},{"./utils":8}],4:[function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(i,"__esModule",{value:!0});const s=e("./utils");i.default=class{constructor(e,t){return this.create=(e,t,i,o,r)=>n(this,void 0,void 0,(function*(){return yield(0,s.fetcher)("POST",`${this.base}/comments?apikey=${this.apikey}`,{token:t,signerAddress:e,comment:i,threadId:o,url:encodeURIComponent(r)})})),this.delete=(e,t,i)=>n(this,void 0,void 0,(function*(){return yield(0,s.fetcher)("DELETE",`${this.base}/comments?apikey=${this.apikey}`,{token:e,signerAddress:t,commentId:i})})),this.query=e=>n(this,void 0,void 0,(function*(){return yield(0,s.fetcher)("GET",`${this.base}/comments?apikey=${this.apikey}&${(0,s.encodeQuery)(e)}`,{})})),this.toggleUpvote=(e,t,i)=>n(this,void 0,void 0,(function*(){return yield(0,s.fetcher)("POST",`${this.base}/vote?apikey=${this.apikey}`,{token:e,signerAddress:t,type:"toggleupvote",commentId:i})})),this.toggleDownvote=(e,t,i)=>n(this,void 0,void 0,(function*(){return yield(0,s.fetcher)("POST",`${this.base}/vote?apikey=${this.apikey}`,{token:e,signerAddress:t,type:"toggledownvote",commentId:i})})),this.apikey=e,this.base=t,this}}},{"./utils":8}],5:[function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(i,"__esModule",{value:!0});const s=e("./utils");i.default=class{constructor(e,t){return this.getTrustScore=e=>n(this,void 0,void 0,(function*(){return yield(0,s.fetcher)("GET",`${this.base}/identity?address=${e}&apikey=${this.apikey}`,{})})),this.apikey=e,this.base=t,this}}},{"./utils":8}],6:[function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:!0}),i.Convo=void 0;const s=n(e("./comments")),o=n(e("./auth")),r=n(e("./base")),a=n(e("./threads")),u=n(e("./identity"));class c extends r.default{constructor(e){return super(e),this.comments=new s.default(e,this.base),this.auth=new o.default(e,this.base),this.threads=new a.default(e,this.base),this.identity=new u.default(e,this.base),this}}i.Convo=c},{"./auth":2,"./base":3,"./comments":4,"./identity":5,"./threads":7}],7:[function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(i,"__esModule",{value:!0});const s=e("./utils");i.default=class{constructor(e,t){return this.create=(e,t,i,o,r,a,u,c,d,h)=>n(this,void 0,void 0,(function*(){return yield(0,s.fetcher)("POST",`${this.base}/threads?apikey=${this.apikey}`,{signerAddress:e,token:t,action:i,title:o,url:encodeURIComponent(r),isReadPublic:a,isWritePublic:u,members:c,moderators:d,keywords:h})})),this.delete=(e,t,i)=>n(this,void 0,void 0,(function*(){return yield(0,s.fetcher)("DELETE",`${this.base}/threads?apikey=${this.apikey}`,{token:e,signerAddress:t,threadId:i})})),this.query=e=>n(this,void 0,void 0,(function*(){return yield(0,s.fetcher)("GET",`${this.base}/comments?apikey=${this.apikey}&${(0,s.encodeQuery)(e)}`,{})})),this.addMembers=(e,t,i,o)=>n(this,void 0,void 0,(function*(){return yield(0,s.fetcher)("POST",`${this.base}/comments?apikey=${this.apikey}`,{token:e,signerAddress:t,action:"addMembers",threadId:i,members:o})})),this.removeMembers=(e,t,i,o)=>n(this,void 0,void 0,(function*(){return yield(0,s.fetcher)("POST",`${this.base}/comments?apikey=${this.apikey}`,{token:e,signerAddress:t,action:"removeMembers",threadId:i,members:o})})),this.addModerators=(e,t,i,o)=>n(this,void 0,void 0,(function*(){return yield(0,s.fetcher)("POST",`${this.base}/comments?apikey=${this.apikey}`,{token:e,signerAddress:t,action:"addModerators",threadId:i,moderators:o})})),this.removeModerators=(e,t,i,o)=>n(this,void 0,void 0,(function*(){return yield(0,s.fetcher)("POST",`${this.base}/comments?apikey=${this.apikey}`,{token:e,signerAddress:t,action:"removeModerators",threadId:i,moderators:o})})),this.updateTitle=(e,t,i,o)=>n(this,void 0,void 0,(function*(){return yield(0,s.fetcher)("POST",`${this.base}/comments?apikey=${this.apikey}`,{token:e,signerAddress:t,action:"updateTitle",threadId:i,title:o})})),this.updateDescription=(e,t,i,o)=>n(this,void 0,void 0,(function*(){return yield(0,s.fetcher)("POST",`${this.base}/comments?apikey=${this.apikey}`,{token:e,signerAddress:t,action:"updateDescription",threadId:i,description:o})})),this.togglePublicRead=(e,t,i)=>n(this,void 0,void 0,(function*(){return yield(0,s.fetcher)("POST",`${this.base}/comments?apikey=${this.apikey}`,{token:e,signerAddress:t,action:"togglePublicRead",threadId:i})})),this.togglePublicWrite=(e,t,i)=>n(this,void 0,void 0,(function*(){return yield(0,s.fetcher)("POST",`${this.base}/comments?apikey=${this.apikey}`,{token:e,signerAddress:t,action:"togglePublicWrite",threadId:i})})),this.apikey=e,this.base=t,this}}},{"./utils":8}],8:[function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:!0}),i.encodeQuery=i.fetcher=void 0;const o=s(e("unfetch"));i.fetcher=function(e,t,i){return n(this,void 0,void 0,(function*(){try{if("GET"===e){let e=yield(0,o.default)(t);return e=yield e.json(),e}if("POST"===e||"UPDATE"===e||"DELETE"===e){let n=yield(0,o.default)(t,{method:e,body:JSON.stringify(i),headers:{"Content-Type":"application/json"}});return n=yield n.json(),n}}catch(e){return console.error(e),{error:e}}}))},i.encodeQuery=function(e){let t="";for(const i in e)t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i])+"&";return t.slice(0,-1)}},{unfetch:1}]},{},[6])(6)}));