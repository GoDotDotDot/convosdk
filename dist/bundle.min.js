!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Convo=e()}}((function(){return function e(t,r,n){function i(s,c){if(!r[s]){if(!t[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=r[s]={exports:{}};t[s][0].call(d.exports,(function(e){return i(t[s][1][e]||e)}),d,d.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){t.exports=function(e,t){return t=t||{},new Promise((function(r,n){var i=new XMLHttpRequest,o=[],s=[],c={},a=function(){return{ok:2==(i.status/100|0),statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return s},get:function(e){return c[e.toLowerCase()]},has:function(e){return e.toLowerCase()in c}}}};for(var u in i.open(t.method||"get",e,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,r){o.push(t=t.toLowerCase()),s.push([t,r]),c[t]=c[t]?c[t]+","+r:r})),r(a())},i.onerror=n,i.withCredentials="include"==t.credentials,t.headers)i.setRequestHeader(u,t.headers[u]);i.send(t.body||null)}))}},{}],2:[function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function c(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,c)}a((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const i=e("./utils");r.default=class{constructor(e,t){return this.validate=(e,t)=>n(this,void 0,void 0,(function*(){try{return yield(0,i.fetcher)("POST",`${this.base}/validateAuth?apikey=${this.apikey}`,{signerAddress:e,token:t})}catch(e){return console.error(e),{error:e}}})),this.authenticate=(e,t,r,o,s)=>n(this,void 0,void 0,(function*(){try{if("ethereum"===o)return yield(0,i.fetcher)("POST",`${this.base}/auth?apikey=${this.apikey}`,{signerAddress:e,signature:t,timestamp:r,chain:o});if("near"===o)return yield(0,i.fetcher)("POST",`${this.base}/auth?apikey=${this.apikey}`,{signerAddress:e,signature:t,accountId:s,timestamp:r,chain:o});{const e="Invalid Chain Name";return console.error(e),{error:e}}}catch(e){return console.error(e),{error:e}}})),this.apikey=e,this.base=t,this}getSignatureData(e,t){return`I allow this site to access my data on The Convo Space using the account ${e}. Timestamp:${t}`}}},{"./utils":8}],3:[function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function c(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,c)}a((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const i=e("./utils");r.default=class{constructor(e){return this.base="https://theconvo.space/api",this.logConfig=()=>n(this,void 0,void 0,(function*(){const e=yield this.ping();return{base:this.base,apikey:this.apikey,version:"0.1.7",pingResult:e}})),this.ping=()=>n(this,void 0,void 0,(function*(){try{return yield(0,i.fetcher)("GET",`${this.base}/ping`,{})}catch(e){return console.error(e),{error:e}}})),this.apikey=e,this}getApiKey(){return this.apikey}}},{"./utils":8}],4:[function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function c(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,c)}a((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const i=e("./utils");r.default=class{constructor(e,t){return this.create=(e,t,r,o,s)=>n(this,void 0,void 0,(function*(){try{return yield(0,i.fetcher)("POST",`${this.base}/comments?apikey=${this.apikey}`,{token:t,signerAddress:e,comment:r,threadId:o,url:encodeURIComponent(s)})}catch(e){return console.error(e),{error:e}}})),this.delete=(e,t,r)=>n(this,void 0,void 0,(function*(){try{return yield(0,i.fetcher)("DELETE",`${this.base}/comments?apikey=${this.apikey}`,{token:e,signerAddress:t,commentId:r})}catch(e){return console.error(e),{error:e}}})),this.query=e=>n(this,void 0,void 0,(function*(){try{return yield(0,i.fetcher)("GET",`${this.base}/comments?apikey=${this.apikey}&${(0,i.encodeQuery)(e)}`,{})}catch(e){return console.error(e),{error:e}}})),this.toggleUpvote=(e,t,r)=>n(this,void 0,void 0,(function*(){try{return yield(0,i.fetcher)("POST",`${this.base}/vote?apikey=${this.apikey}`,{token:e,signerAddress:t,type:"toggleupvote",commentId:r})}catch(e){return console.error(e),{error:e}}})),this.toggleDownvote=(e,t,r)=>n(this,void 0,void 0,(function*(){try{return yield(0,i.fetcher)("POST",`${this.base}/vote?apikey=${this.apikey}`,{token:e,signerAddress:t,type:"toggledownvote",commentId:r})}catch(e){return console.error(e),{error:e}}})),this.apikey=e,this.base=t,this}}},{"./utils":8}],5:[function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function c(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,c)}a((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const i=e("./utils");r.default=class{constructor(e,t){return this.getTrustScore=e=>n(this,void 0,void 0,(function*(){try{return yield(0,i.fetcher)("GET",`${this.base}/identity?address=${e}&apikey=${this.apikey}`,{})}catch(e){return console.error(e),{error:e}}})),this.apikey=e,this.base=t,this}}},{"./utils":8}],6:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Convo=void 0;const i=n(e("./comments")),o=n(e("./auth")),s=n(e("./base")),c=n(e("./threads")),a=n(e("./identity"));class u extends s.default{constructor(e){return super(e),this.comments=new i.default(e,this.base),this.auth=new o.default(e,this.base),this.threads=new c.default(e,this.base),this.identity=new a.default(e,this.base),this}}r.Convo=u},{"./auth":2,"./base":3,"./comments":4,"./identity":5,"./threads":7}],7:[function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function c(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,c)}a((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const i=e("./utils");r.default=class{constructor(e,t){return this.create=(e,t,r,o,s,c,a,u,d,h)=>n(this,void 0,void 0,(function*(){try{return yield(0,i.fetcher)("POST",`${this.base}/threads?apikey=${this.apikey}`,{signerAddress:e,token:t,action:r,title:o,url:encodeURIComponent(s),isReadPublic:c,isWritePublic:a,members:u,moderators:d,keywords:h})}catch(e){return console.error(e),{error:e}}})),this.delete=(e,t,r)=>n(this,void 0,void 0,(function*(){try{return yield(0,i.fetcher)("DELETE",`${this.base}/threads?apikey=${this.apikey}`,{token:e,signerAddress:t,threadId:r})}catch(e){return console.error(e),{error:e}}})),this.query=e=>n(this,void 0,void 0,(function*(){try{return yield(0,i.fetcher)("GET",`${this.base}/comments?apikey=${this.apikey}&${(0,i.encodeQuery)(e)}`,{})}catch(e){return console.error(e),{error:e}}})),this.addMembers=(e,t,r,o)=>n(this,void 0,void 0,(function*(){try{return yield(0,i.fetcher)("POST",`${this.base}/comments?apikey=${this.apikey}`,{token:e,signerAddress:t,action:"addMembers",threadId:r,members:o})}catch(e){return console.error(e),{error:e}}})),this.removeMembers=(e,t,r,o)=>n(this,void 0,void 0,(function*(){try{return yield(0,i.fetcher)("POST",`${this.base}/comments?apikey=${this.apikey}`,{token:e,signerAddress:t,action:"removeMembers",threadId:r,members:o})}catch(e){return console.error(e),{error:e}}})),this.addModerators=(e,t,r,o)=>n(this,void 0,void 0,(function*(){try{return yield(0,i.fetcher)("POST",`${this.base}/comments?apikey=${this.apikey}`,{token:e,signerAddress:t,action:"addModerators",threadId:r,moderators:o})}catch(e){return console.error(e),{error:e}}})),this.removeModerators=(e,t,r,o)=>n(this,void 0,void 0,(function*(){try{return yield(0,i.fetcher)("POST",`${this.base}/comments?apikey=${this.apikey}`,{token:e,signerAddress:t,action:"removeModerators",threadId:r,moderators:o})}catch(e){return console.error(e),{error:e}}})),this.updateTitle=(e,t,r,o)=>n(this,void 0,void 0,(function*(){try{return yield(0,i.fetcher)("POST",`${this.base}/comments?apikey=${this.apikey}`,{token:e,signerAddress:t,action:"updateTitle",threadId:r,title:o})}catch(e){return console.error(e),{error:e}}})),this.updateDescription=(e,t,r,o)=>n(this,void 0,void 0,(function*(){try{return yield(0,i.fetcher)("POST",`${this.base}/comments?apikey=${this.apikey}`,{token:e,signerAddress:t,action:"updateDescription",threadId:r,description:o})}catch(e){return console.error(e),{error:e}}})),this.togglePublicRead=(e,t,r)=>n(this,void 0,void 0,(function*(){try{return yield(0,i.fetcher)("POST",`${this.base}/comments?apikey=${this.apikey}`,{token:e,signerAddress:t,action:"togglePublicRead",threadId:r})}catch(e){return console.error(e),{error:e}}})),this.togglePublicWrite=(e,t,r)=>n(this,void 0,void 0,(function*(){try{return yield(0,i.fetcher)("POST",`${this.base}/comments?apikey=${this.apikey}`,{token:e,signerAddress:t,action:"togglePublicWrite",threadId:r})}catch(e){return console.error(e),{error:e}}})),this.apikey=e,this.base=t,this}}},{"./utils":8}],8:[function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function c(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,c)}a((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.encodeQuery=r.fetcher=void 0;const o=i(e("unfetch"));r.fetcher=function(e,t,r){return n(this,void 0,void 0,(function*(){if("GET"===e){let e=yield(0,o.default)(t);return e=yield e.json(),e}if("POST"===e||"UPDATE"===e||"DELETE"===e){let n=yield(0,o.default)(t,{method:e,body:JSON.stringify(r),headers:{"Content-Type":"application/json"}});return n=yield n.json(),n}}))},r.encodeQuery=function(e){let t="";for(const r in e)t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r])+"&";return t.slice(0,-1)}},{unfetch:1}]},{},[6])(6)}));