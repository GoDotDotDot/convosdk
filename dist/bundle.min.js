!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Convo=e()}}((function(){return function e(t,i,n){function o(s,d){if(!i[s]){if(!t[s]){var u="function"==typeof require&&require;if(!d&&u)return u(s,!0);if(r)return r(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var h=i[s]={exports:{}};t[s][0].call(h.exports,(function(e){return o(t[s][1][e]||e)}),h,h.exports,e,t,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,i){t.exports=function(e,t){return t=t||{},new Promise((function(i,n){var o=new XMLHttpRequest,r=[],s=[],d={},u=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:u,headers:{keys:function(){return r},entries:function(){return s},get:function(e){return d[e.toLowerCase()]},has:function(e){return e.toLowerCase()in d}}}};for(var a in o.open(t.method||"get",e,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,i){r.push(t=t.toLowerCase()),s.push([t,i]),d[t]=d[t]?d[t]+","+i:i})),i(u())},o.onerror=n,o.withCredentials="include"==t.credentials,t.headers)o.setRequestHeader(a,t.headers[a]);o.send(t.body||null)}))}},{}],2:[function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{u(n.next(e))}catch(e){r(e)}}function d(e){try{u(n.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./utils");i.default=class{constructor(e,t){return this.validate=(e,t)=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("POST",`${this.node}/validateAuth`,this.apikey,{signerAddress:e,token:t})})),this.authenticate=(e,t,i,r,s)=>n(this,void 0,void 0,(function*(){if("ethereum"===r)return yield(0,o.fetcher)("POST",`${this.node}/auth`,this.apikey,{signerAddress:e,signature:t,timestamp:i,chain:"ethereum"});if("near"===r)return yield(0,o.fetcher)("POST",`${this.node}/auth`,this.apikey,{signerAddress:e,signature:t,accountId:s,timestamp:i,chain:"near"});if("flow"===r)return yield(0,o.fetcher)("POST",`${this.node}/auth`,this.apikey,{signerAddress:e,signature:t,timestamp:i,chain:"flow"});if("solana"===r)return yield(0,o.fetcher)("POST",`${this.node}/auth`,this.apikey,{signerAddress:e,signature:t,timestamp:i,chain:"solana"});{const e="Invalid Chain Name";return console.error(e),{error:e}}})),this.apikey=e,this.node=t,this}getSignatureData(e,t){return`I allow this site to access my data on The Convo Space using the account ${e}. Timestamp:${t}`}}},{"./utils":8}],3:[function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{u(n.next(e))}catch(e){r(e)}}function d(e){try{u(n.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./utils");i.default=class{constructor(e,t){return this.logConfig=()=>n(this,void 0,void 0,(function*(){const e=yield this.ping();return{node:this.node,apikey:this.apikey,version:"0.2.0",pingResult:e}})),this.ping=()=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("GET",`${this.node}/ping`,this.apikey,{})})),this.apikey=e,this.node=t,this}getApiKey(){return this.apikey}}},{"./utils":8}],4:[function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{u(n.next(e))}catch(e){r(e)}}function d(e){try{u(n.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./utils");i.default=class{constructor(e,t){return this.create=(e,t,i,r,s,d={})=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("POST",`${this.node}/comments`,this.apikey,{token:t,signerAddress:e,comment:i,threadId:r,url:decodeURIComponent(s),metadata:d})})),this.delete=(e,t,i)=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("DELETE",`${this.node}/comments`,this.apikey,{token:t,signerAddress:e,commentId:i})})),this.query=e=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("GET",`${this.node}/comments?${(0,o.encodeQuery)(e)}`,this.apikey,{})})),this.multiQuery=e=>n(this,void 0,void 0,(function*(){return yield Promise.allSettled(e.map((e=>this.query(e))))})),this.toggleUpvote=(e,t,i)=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("POST",`${this.node}/vote`,this.apikey,{token:t,signerAddress:e,type:"toggleupvote",commentId:i})})),this.toggleDownvote=(e,t,i)=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("POST",`${this.node}/vote`,this.apikey,{token:t,signerAddress:e,type:"toggledownvote",commentId:i})})),this.apikey=e,this.node=t,this}}},{"./utils":8}],5:[function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{u(n.next(e))}catch(e){r(e)}}function d(e){try{u(n.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./utils");i.default=class{constructor(e,t){return this.getTrustScore=e=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("GET",`${this.node}/identity?address=${e}`,this.apikey,{})})),this.apikey=e,this.node=t,this}}},{"./utils":8}],6:[function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:!0}),i.Convo=void 0;const o=n(e("./comments")),r=n(e("./auth")),s=n(e("./base")),d=n(e("./threads")),u=n(e("./identity"));class a extends s.default{constructor(e,t="https://theconvo.space/api"){return super(e,t),this.comments=new o.default(e,this.node),this.auth=new r.default(e,this.node),this.threads=new d.default(e,this.node),this.identity=new u.default(e,this.node),this}}i.Convo=a},{"./auth":2,"./base":3,"./comments":4,"./identity":5,"./threads":7}],7:[function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{u(n.next(e))}catch(e){r(e)}}function d(e){try{u(n.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./utils");i.default=class{constructor(e,t){return this.create=(e,t,i,r,s,d,u,a,h,c,f={},l=!1)=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("POST",`${this.node}/threads`,this.apikey,{signerAddress:e,token:t,action:"create",title:encodeURIComponent(i),description:encodeURIComponent(r),url:encodeURIComponent(s),isReadPublic:d,isWritePublic:u,members:a,moderators:h,keywords:c,threadId:l,metadata:f})})),this.createPrivate=(e,t,i,o,r,s,d,u,a={},h=!1)=>n(this,void 0,void 0,(function*(){return yield this.create(e,t,i,o,r,!1,!1,s,d,u,a,h)})),this.delete=(e,t,i)=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("DELETE",`${this.node}/threads`,this.apikey,{token:t,signerAddress:e,threadId:i})})),this.query=e=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("GET",`${this.node}/threads?${(0,o.encodeQuery)(e)}`,this.apikey,{})})),this.multiQuery=e=>n(this,void 0,void 0,(function*(){return yield Promise.allSettled(e.map((e=>this.query(e))))})),this.getThread=e=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("GET",`${this.node}/threads/${e}`,this.apikey)})),this.getUserThreads=e=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("GET",`${this.node}/threads/user/${e}`,this.apikey)})),this.addMembers=(e,t,i,r)=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("POST",`${this.node}/threads`,this.apikey,{token:t,signerAddress:e,action:"addMembers",threadId:i,members:r})})),this.removeMembers=(e,t,i,r)=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("POST",`${this.node}/threads`,this.apikey,{token:t,signerAddress:e,action:"removeMembers",threadId:i,members:r})})),this.addModerators=(e,t,i,r)=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("POST",`${this.node}/threads`,this.apikey,{token:t,signerAddress:e,action:"addModerators",threadId:i,moderators:r})})),this.removeModerators=(e,t,i,r)=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("POST",`${this.node}/threads`,this.apikey,{token:t,signerAddress:e,action:"removeModerators",threadId:i,moderators:r})})),this.updateTitle=(e,t,i,r)=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("POST",`${this.node}/threads`,this.apikey,{token:t,signerAddress:e,action:"updateTitle",threadId:i,title:r})})),this.updateDescription=(e,t,i,r)=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("POST",`${this.node}/threads`,this.apikey,{token:t,signerAddress:e,action:"updateDescription",threadId:i,description:r})})),this.togglePublicRead=(e,t,i)=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("POST",`${this.node}/threads`,this.apikey,{token:t,signerAddress:e,action:"togglePublicRead",threadId:i})})),this.togglePublicWrite=(e,t,i)=>n(this,void 0,void 0,(function*(){return yield(0,o.fetcher)("POST",`${this.node}/threads`,this.apikey,{token:t,signerAddress:e,action:"togglePublicWrite",threadId:i})})),this.apikey=e,this.node=t,this}}},{"./utils":8}],8:[function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{u(n.next(e))}catch(e){r(e)}}function d(e){try{u(n.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:!0}),i.encodeQuery=i.fetcher=void 0;const r=o(e("unfetch"));i.fetcher=function(e,t,i,o={}){return n(this,void 0,void 0,(function*(){try{if("GET"===e){let e=yield(0,r.default)(t,{method:"GET",headers:{"x-api-key":i}});return e=yield e.json(),e}if("POST"===e||"UPDATE"===e||"DELETE"===e){let n=yield(0,r.default)(t,{method:e,body:JSON.stringify(o),headers:{"x-api-key":i,"Content-Type":"application/json"}});return n=yield n.json(),n}}catch(e){return console.error(e),{error:e}}}))},i.encodeQuery=function(e){let t="";for(const i in e)t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i])+"&";return t.slice(0,-1)}},{unfetch:1}]},{},[6])(6)}));